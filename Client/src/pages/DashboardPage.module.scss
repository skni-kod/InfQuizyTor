@use "../styles/mixins" as m;

.dashboardContainer {
  min-height: calc(100vh - 60px);
  padding: 20px;
  position: relative;
  overflow-x: hidden;
  gap: 2rem;

  background-image: var(--bg-image-url);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  background-color: var(--bg0-dark);
}

// --- KONFIGURACJA ANIMACJI ---

// Domyślnie, wnętrze każdego kafelka ma płynne przejścia
:global(.react-grid-item) > div {
  width: 100%;
  height: 100%;
  transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s ease,
    filter 0.5s ease;
  transform-origin: center center;
}

// --- STAN OTWARTEGO MENU ---
.menuOpen {
  // 1. WIDGETY: Wszystkie dzieci elementów siatki, KTÓRE NIE SĄ w kafelku z klasą .static-menu
  // Używamy :not() na rodzicu (.react-grid-item)
  :global(.react-grid-item):not(:global(.static-menu)) > div {
    // "Ucieczka" od środka
    transform: scale(0.85); // Zmniejsz
    opacity: 0; // Prawie zniknij
    filter: blur(8px) grayscale(80%); // Rozmyj
    pointer-events: none; // Wyłącz interakcję
  }

  // 2. MENU: Element z klasą .static-menu
  // Musi zostać na wierzchu i bez zmian
  :global(.react-grid-item.static-menu) {
    z-index: 1000 !important;

    // Upewnij się, że dziecko (menuWrapper) nie znika
    > div {
      transform: none !important;
      opacity: 1 !important;
      filter: none !important;
      pointer-events: auto;
    }
  }
}

// --- STYL KONTENERA MENU ---
// Ten div jest bezpośrednim dzieckiem .react-grid-item dla menu
.menuWrapper {
  display: flex; // Flexbox do centrowania
  align-items: center; // Pionowo
  justify-content: center; // Poziomo
  width: 100%;
  height: 100%;
  // Menu przepuszcza kliknięcia w puste miejsca
  pointer-events: none;

  // Ale samo kółko menu (dziecko) musi klikać
  & > * {
    pointer-events: auto;
  }
}

// Ukrycie uchwytów zmiany rozmiaru dla statycznego menu
:global(.react-grid-item.static .react-resizable-handle) {
  display: none !important;
}

// Styl placeholdera podczas przesuwania widgetów
:global(.react-grid-placeholder) {
  background: rgba(255, 255, 255, 0.1) !important;
  border-radius: 16px;
  opacity: 0.3;
}
